## Architecture Decision Records

This directory contains **Architecture Decision Records (ADRs)**: short, durable documents that capture a significant architectural decision, the context that drove it, the alternatives considered, and the consequences/trade-offs.

ADRs exist to preserve the “why” behind the system. Code and diagrams tell us what we built while ADRs why we chose it and when we should revisit it. This reduces tribal knowledge, speeds onboarding, and prevents repeated re-litigation of the same decisions.

We use ADRs to:

- Make decisions **discoverable** and **reviewable** in PRs
- Capture **trade-offs** explicitly (not just the chosen option)
- Improve architecture evolution by **superseding** decisions cleanly
- Provide an audit trail for postmortems, security/compliance reviews, and scaling events
- Cross-cutting (observability, security, resilience, multi-tenancy)

### When to add ADR

Create or update an ADR when a change is **structurally important** — it impacts any of the boxes:

- system’s structure
- non-functional characteristics
- dependencies
- interfaces (API/versioning policy, event schema/compatibility)
- construction techniques (platforms, frameworks, tools, and even processes that, although technical in nature, might impact some aspect of the architecture)

In general, these will be decisions that are **hard to reverse**.  No ADR is required for small local refactors or trivial implementation details.

### Location and format

- ADRs live in-repo: `docs/adr/`
- File format: Markdown (`.md`). Reuse the template provided (`docs\adr\template.md`)
- Naming: `NNNN-kebab-case-title.md` (e.g., `0007-use-kafka-for-market-events.md`)
- One ADR per decision
- **ADRs are immutable**: modifications are not allowed (you may add UPDATE section when necessary) and are rather superseded by the new ADR

### Status

Allowed statuses:

- `Proposed`: under discussion
- `Approved`: decision agreed; implementation planned or starting
- `Partially Implemented`: some rollout done; not complete
- `Implemented`: decision fully applied (or the “active” standard)
- `Rejected`: considered and not chosen (useful to prevent rehash)
- `Deprecated`: no longer recommended, but may still exist temporarily
- `Superseded`: replaced by a newer ADR (do not rewrite old ADRs)

If a decision changes, write a new ADR and mark the old one as `Superseded` (link both ways).

### Required content

Use `docs/adr/template.md`. At minimum, every ADR must include:

- Context & problem statement (drivers/forces)
- Decision (and scope)
- Consequences (pros/cons and quality attribute impact)

Recommended:

- Options considered

### Ownership and review

- ADRs are reviewed via PR like code.
- ADRs must link to relevant PRs/docs/diagrams where applicable.

### Index

README (`docs\adr\README.md`) contains an autogenerated (via CICD) ADR index section.

______________________________________________________________________

## How to create/update an ADR (workflow)

### Step 1: Decide if an ADR is needed

If the change is cross-cutting, hard to reverse, or a contract/boundary decision, create an ADR.

### Step 2: Create the ADR file

Copy the template:

- Start from: `docs/adr/template.md`
- Create: `docs/adr/NNNN-<title>.md`
- Fill metadata (date, author, status, tags, links)

Recommended:

- New ADRs start as `Proposed`.

### Step 3: Write the ADR for future readers

Focus on:

- What decision we made
- Why now (constraints and drivers)
- Alternatives and why they were not chosen
- Consequences and risks (including operational)
- Revisit triggers (measurable)

Keep ADRs concise and decision-focused.

### Step 4: Review in PR

4.1 Include the ADR in the same PR as the architectural change when possible.

4.2 Use PR discussion to converge on the final decision.

4.3 Update status as the decision progresses:

- `Proposed` → `Approved` when agreed
- `Approved` → `Implemented` when fully rolled out
- `Partially Implemented` if rollout is incremental

4.4 Indicate ADR addition in the PR description

### Step 5: Supersede, don’t rewrite

If the decision changes:

- Create a new ADR describing the new decision
- Mark the old ADR as Superseded
- Add cross-links (Supersedes / Superseded by)
